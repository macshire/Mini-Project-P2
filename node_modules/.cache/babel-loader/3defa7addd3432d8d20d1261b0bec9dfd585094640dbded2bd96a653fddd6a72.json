{"ast":null,"code":"var _jsxFileName = \"/home/maximilian/Desktop/Mini-Project/src/components/Reviews/index.js\",\n  _s = $RefreshSig$();\nimport '../About.css';\nimport { Rate } from './StarRating';\nimport { useOutletContext } from 'react-router-dom';\nimport booksData from '../../data/booksData';\nimport InputLabel from '@mui/material/InputLabel';\nimport About from '../About';\nimport React, { useEffect, useState, createContext, useContext } from 'react';\nimport axios from 'axios';\nimport '../Layout';\nimport StarRating from './StarRating';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Review = ({\n  review,\n  users\n}) => {\n  _s();\n  const {\n    title,\n    url,\n    author,\n    num_comments,\n    image,\n    points,\n    objectID\n  } = review;\n  const [reviewText, setReviewText] = useState('');\n  const {\n    userLoggedIn,\n    userId\n  } = useOutletContext();\n  console.log('User Logged In:', userLoggedIn);\n  console.log('User ID:', userId);\n  const handleTextChange = event => {\n    setReviewText(event.target.value); // Update state with the textarea value\n    setUserReviews(reviewText);\n  };\n  const processUserInfo = () => {\n    if (userLoggedIn) {\n      console.log(`User ID: ${userId}`);\n    } else {\n      console.log('User is not logged in.');\n    }\n  };\n  const [userReviews, setUserReviews] = useState([]);\n\n  //call at beginning of function so that it immediately checks for users instead of only checking after the account is made\n\n  const [newRating, setNewRating] = useState(0);\n  const handleRatingChange = rating => {\n    setNewRating(rating); // Update the newRating state\n  };\n  const handleCreateReview = () => {\n    console.log(userReviews);\n    console.log(\"idk\" + newRating);\n    console.log(userId);\n    if (!userLoggedIn) {\n      alert(\"Please log in to add a review\");\n      return; // Exit the function early if not logged in\n    }\n\n    // Proceed to create a review if the user is logged in\n    axios.post('http://localhost:7000/reviews', {\n      id: userId,\n      review: userReviews,\n      stars: newRating,\n      created_at: new Date().toISOString() // Use current date and time\n    }).then(response => {\n      console.log(\"Added review\", response.data);\n      fetchUserReviews(); // Fetch updated reviews after successfully adding one\n    }).catch(error => {\n      console.log(\"Didn't add review\", error);\n    });\n  };\n\n  // Function to fetch user reviews\n  const fetchUserReviews = () => {\n    axios.get('http://localhost:7000/reviews').then(response => {\n      setUserReviews(response.data); // Update state with the reviews\n    }).catch(error => {\n      console.error('There was an error fetching the reviews!', error);\n    });\n  };\n\n  // useEffect to fetch reviews when the component mounts\n  useEffect(() => {\n    fetchUserReviews();\n  }, []); // Empty dependency array to run on mount\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"review-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviewBig\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: image,\n          className: \"reviewImage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviewTitle\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reviewTitle\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"p-title\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          col: \"30\",\n          rows: \"20\",\n          type: \"text\",\n          id: \"reviewText\",\n          placeholder: \"Leave a Review!\",\n          value: reviewText,\n          onChange: handleTextChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rateStyle\",\n          children: /*#__PURE__*/_jsxDEV(Rate, {\n            starR: newRating,\n            onRatingChange: handleRatingChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"reviewButton\",\n          onClick: handleCreateReview,\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 7\n  }, this);\n  return {\n    processUserInfo\n  };\n};\n_s(Review, \"18bZG6P69iBcRmiHhSH2olXtl5Y=\", false, function () {\n  return [useOutletContext];\n});\n_c = Review;\nexport default Review;\nvar _c;\n$RefreshReg$(_c, \"Review\");","map":{"version":3,"names":["Rate","useOutletContext","booksData","InputLabel","About","React","useEffect","useState","createContext","useContext","axios","StarRating","jsxDEV","_jsxDEV","Review","review","users","_s","title","url","author","num_comments","image","points","objectID","reviewText","setReviewText","userLoggedIn","userId","console","log","handleTextChange","event","target","value","setUserReviews","processUserInfo","userReviews","newRating","setNewRating","handleRatingChange","rating","handleCreateReview","alert","post","id","stars","created_at","Date","toISOString","then","response","data","fetchUserReviews","catch","error","get","className","children","src","fileName","_jsxFileName","lineNumber","columnNumber","col","rows","type","placeholder","onChange","starR","onRatingChange","onClick","_c","$RefreshReg$"],"sources":["/home/maximilian/Desktop/Mini-Project/src/components/Reviews/index.js"],"sourcesContent":["import '../About.css';\nimport { Rate } from './StarRating';\nimport { useOutletContext } from 'react-router-dom';\n\nimport booksData from '../../data/booksData';\nimport InputLabel from '@mui/material/InputLabel';\nimport About from '../About';\nimport React, { useEffect, useState, createContext, useContext } from 'react';\nimport axios from 'axios';\nimport '../Layout';\nimport StarRating from './StarRating';\nconst Review = ({ review, users}) => {\n    const {\n      title,\n      url,\n      author,\n      num_comments,\n      image,\n      points,\n      objectID,\n    } = review;\n\n    const [reviewText, setReviewText] = useState('');\n    const { userLoggedIn, userId } = useOutletContext();\n    console.log('User Logged In:', userLoggedIn);\n    console.log('User ID:', userId);\n    const handleTextChange = (event) => {\n      setReviewText(event.target.value); // Update state with the textarea value\n      setUserReviews(reviewText);\n    };\n\n    const processUserInfo = () => {\n      if (userLoggedIn) {\n        console.log(`User ID: ${userId}`);\n      } else {\n        console.log('User is not logged in.');\n      }\n    };\n    const [userReviews, setUserReviews] = useState([]);\n\n  \n    //call at beginning of function so that it immediately checks for users instead of only checking after the account is made\n  \n    const [newRating, setNewRating] = useState(0);\n    \n    const handleRatingChange = (rating) => {\n      setNewRating(rating); // Update the newRating state\n    };\n\n    const handleCreateReview = () => {\n      console.log(userReviews);\n      console.log(\"idk\" + newRating);\n      console.log(userId);\n    \n      if (!userLoggedIn) {\n        alert(\"Please log in to add a review\");\n        return; // Exit the function early if not logged in\n      }\n    \n      // Proceed to create a review if the user is logged in\n      axios.post('http://localhost:7000/reviews', {\n        id: userId,\n        review: userReviews,\n        stars: newRating,\n        created_at: new Date().toISOString() // Use current date and time\n      })\n      .then(response => {\n        console.log(\"Added review\", response.data);\n        fetchUserReviews(); // Fetch updated reviews after successfully adding one\n      })\n      .catch(error => {\n        console.log(\"Didn't add review\", error);\n      });\n    };\n    \n    // Function to fetch user reviews\n    const fetchUserReviews = () => {\n      axios.get('http://localhost:7000/reviews')\n        .then(response => {\n          setUserReviews(response.data); // Update state with the reviews\n        })\n        .catch(error => {\n          console.error('There was an error fetching the reviews!', error);\n        });\n    };\n    \n    // useEffect to fetch reviews when the component mounts\n    useEffect(() => {\n      fetchUserReviews();\n    }, []); // Empty dependency array to run on mount\n    \n    return (\n      <div className='review-container'>\n      <div className=\"reviewBig\">\n        <div>\n          <img src={image} className='reviewImage'></img>\n        </div>\n        <div className='reviewTitle'>\n          <div className='reviewTitle'>\n            <p id='p-title'>{title}</p>\n            <p>{author}</p>\n          </div>\n          <textarea\n            col =\"30\"\n            rows=\"20\"\n            type=\"text\"\n            id='reviewText'\n            placeholder=\"Leave a Review!\"\n            value={reviewText}\n            onChange={handleTextChange}\n          />\n          <div className = \"rateStyle\">\n            <Rate \n            starR = {newRating}\n            onRatingChange={handleRatingChange}\n            >  \n            </Rate>\n          </div>\n          <button id=\"reviewButton\" onClick={handleCreateReview}>Save</button>\n        </div>\n      </div>\n\n      </div>\n      \n    );\n    return {\n      processUserInfo,\n    };\n  };\n\n\n  export default Review;\n\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}