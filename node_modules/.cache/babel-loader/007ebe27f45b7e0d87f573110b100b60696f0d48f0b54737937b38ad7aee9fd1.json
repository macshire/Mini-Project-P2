{"ast":null,"code":"var _jsxFileName = \"/home/maximilian/Desktop/Mini-Project/src/components/Reviews/index.js\",\n  _s = $RefreshSig$();\nimport '../About.css';\nimport { Rate } from './StarRating';\nimport { useOutletContext } from 'react-router-dom';\nimport booksData from '../../data/booksData';\nimport InputLabel from '@mui/material/InputLabel';\nimport About from '../About';\nimport React, { useEffect, useState, createContext, useContext } from 'react';\nimport axios from 'axios';\nimport '../Layout';\nimport StarRating from './StarRating';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Review = ({\n  review,\n  users\n}) => {\n  _s();\n  const {\n    title,\n    url,\n    author,\n    num_comments,\n    image,\n    points,\n    objectID\n  } = review;\n  const [reviewText, setReviewText] = useState('');\n  const {\n    userLoggedIn,\n    userId\n  } = useOutletContext();\n  console.log('User Logged In:', userLoggedIn);\n  console.log('User ID:', userId);\n  const handleTextChange = event => {\n    setReviewText(event.target.value); // Update state with the textarea value\n    setUserReviews(reviewText);\n  };\n  const processUserInfo = () => {\n    if (userLoggedIn) {\n      console.log(`User ID: ${userId}`);\n    } else {\n      console.log('User is not logged in.');\n    }\n  };\n  const [userReviews, setUserReviews] = useState([]);\n  useEffect(() => {\n    axios.get('http://localhost:7000/reviews').then(response => {\n      setUserReviews(response.data); // Update state with the user data\n    }).catch(error => {\n      console.error('There was an error fetching the reviews!', error);\n    });\n  }, handleCreateReview());\n  //call at beginning of function so that it immediately checks for users instead of only checking after the account is made\n\n  const [newRating, setNewRating] = useState(0);\n  const handleRatingChange = rating => {\n    setNewRating(rating); // Update the newRating state\n  };\n  const handleCreateReview = () => {\n    console.log(userReviews);\n    console.log(\"idk\" + newRating);\n    console.log(userId);\n    if (!userLoggedIn) {\n      // setShow(false);\n      //add logic to send post to db in order to create a new user\n      //creating a new user in DB\n      axios.post('http://localhost:7000/reviews', {\n        id: userId,\n        review: userReviews,\n        stars: newRating,\n        created_at: 'now'\n      }).then(response => {\n        console.log(\"ADded review\", response.data);\n\n        //fetchUserReviews();\n      }).catch(error => {\n        console.log(\"didnt add review\", error);\n      });\n    } else if (!userLoggedIn) {\n      alert(\"please log in\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"review-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reviewBig\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: image,\n          className: \"reviewImage\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reviewTitle\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reviewTitle\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"p-title\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          col: \"30\",\n          rows: \"20\",\n          type: \"text\",\n          id: \"reviewText\",\n          placeholder: \"Leave a Review!\",\n          value: reviewText,\n          onChange: handleTextChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rateStyle\",\n          children: /*#__PURE__*/_jsxDEV(Rate, {\n            starR: newRating,\n            onRatingChange: handleRatingChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"reviewButton\",\n          onClick: handleCreateReview,\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 7\n  }, this);\n  return {\n    processUserInfo\n  };\n};\n_s(Review, \"k286DoMdrSNcXbnp4spEyQJz9GI=\", false, function () {\n  return [useOutletContext];\n});\n_c = Review;\nexport default Review;\nvar _c;\n$RefreshReg$(_c, \"Review\");","map":{"version":3,"names":["Rate","useOutletContext","booksData","InputLabel","About","React","useEffect","useState","createContext","useContext","axios","StarRating","jsxDEV","_jsxDEV","Review","review","users","_s","title","url","author","num_comments","image","points","objectID","reviewText","setReviewText","userLoggedIn","userId","console","log","handleTextChange","event","target","value","setUserReviews","processUserInfo","userReviews","get","then","response","data","catch","error","handleCreateReview","newRating","setNewRating","handleRatingChange","rating","post","id","stars","created_at","alert","className","children","src","fileName","_jsxFileName","lineNumber","columnNumber","col","rows","type","placeholder","onChange","starR","onRatingChange","onClick","_c","$RefreshReg$"],"sources":["/home/maximilian/Desktop/Mini-Project/src/components/Reviews/index.js"],"sourcesContent":["import '../About.css';\nimport { Rate } from './StarRating';\nimport { useOutletContext } from 'react-router-dom';\n\nimport booksData from '../../data/booksData';\nimport InputLabel from '@mui/material/InputLabel';\nimport About from '../About';\nimport React, { useEffect, useState, createContext, useContext } from 'react';\nimport axios from 'axios';\nimport '../Layout';\nimport StarRating from './StarRating';\nconst Review = ({ review, users}) => {\n    const {\n      title,\n      url,\n      author,\n      num_comments,\n      image,\n      points,\n      objectID,\n    } = review;\n\n    const [reviewText, setReviewText] = useState('');\n    const { userLoggedIn, userId } = useOutletContext();\n    console.log('User Logged In:', userLoggedIn);\n    console.log('User ID:', userId);\n    const handleTextChange = (event) => {\n      setReviewText(event.target.value); // Update state with the textarea value\n      setUserReviews(reviewText);\n    };\n\n    const processUserInfo = () => {\n      if (userLoggedIn) {\n        console.log(`User ID: ${userId}`);\n      } else {\n        console.log('User is not logged in.');\n      }\n    };\n    const [userReviews, setUserReviews] = useState([]);\n\n    \n    useEffect(() => {\n        axios.get('http://localhost:7000/reviews')\n          .then(response => {\n             setUserReviews(response.data); // Update state with the user data\n          })\n          .catch(error => {\n            console.error('There was an error fetching the reviews!', error);\n          });\n\n    }, handleCreateReview())\n    //call at beginning of function so that it immediately checks for users instead of only checking after the account is made\n  \n    const [newRating, setNewRating] = useState(0);\n    \n    const handleRatingChange = (rating) => {\n      setNewRating(rating); // Update the newRating state\n    };\n\n    const handleCreateReview = () => {\n\n      console.log(userReviews)\n      console.log(\"idk\" + newRating);\n      console.log(userId);\n      if(!userLoggedIn){\n      // setShow(false);\n      //add logic to send post to db in order to create a new user\n      //creating a new user in DB\n      axios.post('http://localhost:7000/reviews', {\n        id: userId,\n        review: userReviews,\n        stars: newRating,\n        created_at: 'now'\n\n      }).then(response => {\n        console.log(\"ADded review\", response.data);\n\n        //fetchUserReviews();\n       }).catch(error => {\n        console.log(\"didnt add review\", error);\n      })\n      }\n      else if (!userLoggedIn){\n        alert(\"please log in\");\n      }   \n    };\n\n    \n    return (\n      <div className='review-container'>\n      <div className=\"reviewBig\">\n        <div>\n          <img src={image} className='reviewImage'></img>\n        </div>\n        <div className='reviewTitle'>\n          <div className='reviewTitle'>\n            <p id='p-title'>{title}</p>\n            <p>{author}</p>\n          </div>\n          <textarea\n            col =\"30\"\n            rows=\"20\"\n            type=\"text\"\n            id='reviewText'\n            placeholder=\"Leave a Review!\"\n            value={reviewText}\n            onChange={handleTextChange}\n          />\n          <div className = \"rateStyle\">\n            <Rate \n            starR = {newRating}\n            onRatingChange={handleRatingChange}\n            >  \n            </Rate>\n          </div>\n          <button id=\"reviewButton\" onClick={handleCreateReview}>Save</button>\n        </div>\n      </div>\n\n      </div>\n      \n    );\n    return {\n      processUserInfo,\n    };\n  };\n\n\n  export default Review;\n\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}